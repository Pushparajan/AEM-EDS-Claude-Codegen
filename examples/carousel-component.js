/**
 * Example Carousel Component
 * Generated by AEM EDS Code Generator
 */

export default function Carousel(element, options = {}) {
  // Component logic
  const defaults = {
    autoPlay: true,
    interval: 3000,
    showDots: true
  };

  const config = { ...defaults, ...options };

  let currentSlide = 0;
  let slides = [];
  let intervalId = null;

  function init() {
    // Initialize component
    console.log('Carousel initialized with config:', config);
    slides = element.querySelectorAll('.slide');

    if (config.showDots) {
      createDots();
    }

    if (config.autoPlay) {
      startAutoPlay();
    }

    attachEventListeners();
  }

  function createDots() {
    const dotsContainer = document.createElement('div');
    dotsContainer.className = 'carousel-dots';

    slides.forEach((_, index) => {
      const dot = document.createElement('button');
      dot.className = 'carousel-dot';
      dot.setAttribute('data-slide', index);
      dotsContainer.appendChild(dot);
    });

    element.appendChild(dotsContainer);
  }

  function startAutoPlay() {
    intervalId = setInterval(() => {
      goToSlide((currentSlide + 1) % slides.length);
    }, config.interval);
  }

  function goToSlide(index) {
    slides[currentSlide].classList.remove('active');
    slides[index].classList.add('active');
    currentSlide = index;
  }

  function attachEventListeners() {
    element.querySelectorAll('.carousel-dot').forEach(dot => {
      dot.addEventListener('click', (e) => {
        const slideIndex = parseInt(e.target.getAttribute('data-slide'));
        goToSlide(slideIndex);
      });
    });
  }

  function render() {
    // Render logic
    if (slides.length > 0) {
      slides[0].classList.add('active');
    }
  }

  function destroy() {
    if (intervalId) {
      clearInterval(intervalId);
    }
  }

  // Public API
  return {
    init,
    render,
    destroy,
    element
  };
}
